<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Articles Practice for Kids</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #718096;
            margin-bottom: 20px;
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            background: #f7fafc;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .score-item {
            text-align: center;
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 5px;
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4a5568;
        }
        
        .question-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .question-number {
            font-size: 1rem;
            color: #8b4513;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .question-text {
            font-size: 2rem;
            color: #2d3748;
            margin-bottom: 30px;
            font-weight: 700;
        }
        
        .noun-highlight {
            color: #e53e3e;
            text-decoration: underline;
            text-decoration-color: #e53e3e;
        }
        
        .options {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .option-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Neue', cursive;
            min-width: 120px;
        }
        
        .option-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .option-btn:active {
            transform: translateY(0);
        }
        
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feedback.show {
            opacity: 1;
        }
        
        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #68d391;
        }
        
        .feedback.incorrect {
            background: #fed7d7;
            color: #742a2a;
            border: 2px solid #fc8181;
        }
        
        .next-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Comic Neue', cursive;
            transition: all 0.3s ease;
            order: 2; /* Always appears second */
        }
        
        .next-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        .next-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        
        .voice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .voice-btn {
            background: #805ad5;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Neue', cursive;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .voice-btn:hover {
            background: #6b46c1;
            transform: translateY(-2px);
        }
        
        .voice-btn.active {
            background: #553c9a;
            box-shadow: 0 0 10px rgba(128, 90, 213, 0.5);
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
            min-height: 120px; /* Reserve space for both buttons */
        }
        
        .read-sentence-btn {
            background: #ed8936;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Neue', cursive;
            display: none;
            order: 1; /* Always appears first */
        }
        
        .read-sentence-btn:hover {
            background: #dd7724;
            transform: translateY(-2px);
        }
        
        .read-sentence-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        
        .celebration {
            text-align: center;
            font-size: 3rem;
            margin: 20px 0;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .celebration.show {
            opacity: 1;
        }
        
        .progress-bar {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4299e1, #48bb78);
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.5rem;
            }
            
            .options {
                flex-direction: column;
                align-items: center;
            }
            
            .option-btn {
                width: 100%;
                max-width: 200px;
            }
        }
  </style>

  
</head>
<body>
  <div class="container">
        <div class="header">
            <h1 class="title">🎯 Articles Practice</h1>
            <p class="subtitle">Choose "a" or "an" for each word!</p>
            
            <div class="voice-controls">
                <button class="voice-btn active" id="female-voice" onclick="setVoice('female')">
                    👩 Woman Voice
                </button>
                <button class="voice-btn" id="male-voice" onclick="setVoice('male')">
                    👨 Man Voice
                </button>
            </div>
        </div>
        
        <div class="score-board">
            <div class="score-item">
                <div class="score-label">Correct</div>
                <div class="score-value" id="correct-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Question</div>
                <div class="score-value"><span id="current-question">1</span>/5</div>
            </div>
            <div class="score-item">
                <div class="score-label">Total Score</div>
                <div class="score-value" id="total-score">0</div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 20%"></div>
        </div>
        
        <div class="question-card">
            <div class="question-number" id="question-number">Question 1 of 5</div>
            <div class="question-text" id="question-text">
                I see ___ <span class="noun-highlight" id="noun">apple</span>
            </div>
            
            <div class="options">
                <button class="option-btn" onclick="selectAnswer('a')">a</button>
                <button class="option-btn" onclick="selectAnswer('an')">an</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
            <div class="celebration" id="celebration"></div>
            
            <div class="action-buttons">
                <button class="read-sentence-btn" id="read-sentence-btn" onclick="readFullSentence()">
                    🔊 Read Full Sentence
                </button>
                
                <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                    Next Question 🎉
                </button>
            </div>
        </div>
    </div>

  <script>
    // 50 different sentence starters for maximum variety
// ===== 50 sentence starters =====
// ===== 语义类别 + 对应 nouns =====
const nounsByCategory = {
    animals: [
        "cat","dog","tiger","lion","zebra","giraffe","kangaroo","panda","koala",
        "whale","shark","dolphin","turtle","frog","snake","lizard","spider",
        "butterfly","bee","ladybug","monkey","rabbit"
    ],
    food: [
        "apple","banana","grape","strawberry","watermelon","pineapple","cherry",
        "peach","pear","lemon","lime","mango","potato","carrot","tomato","cucumber",
        "lettuce","broccoli","corn","pepper","mushroom","spinach","cookie","cake",
        "pizza","sandwich","ice cream"
    ],
    buyableObjects: [
        "phone","computer","tablet","camera","television","radio","clock","lamp",
        "mirror","picture","painting","vase","candle","pillow","blanket","towel",
        "soap","toothbrush","comb","brush","scissors","wallet","backpack","purse",
        "key","shirt","dress","hat","shoe","sock","jacket","sweater","scarf","glove",
        "belt","watch","necklace","ring","bracelet"
    ],
    toolsObjects: [
        "hammer","screwdriver","wrench","nail","screw","rope","ladder","oven",
        "ladder","door","window","table","chair"
    ],
    abstract: [
        "idea","instant","event","effort","exam","error","entry","ending","energy",
        "invite","item","usage","image","index","insect","injury","ultra"
    ],
    people: [
        "uncle","agent","actor","adult","author","editor","alien"
    ],
    plants: [
        "tree","flower","orchid","broccoli","carrot","lettuce"
    ]
};

// ===== 语义类别 + 对应 starters =====
const startersByCategory = {
    animals: [
        "I saw ___","I fed ___","I caught ___","I held ___","I touched ___"
    ],
    food: [
        "I ate ___","I made ___","I bought ___","I like ___","I want ___"
    ],
    buyableObjects: [
        "I bought ___","I found ___","I have ___","I need ___","I gave ___"
    ],
    toolsObjects: [
        "I fixed ___","I cleaned ___","I opened ___","I closed ___","I turned on ___"
    ],
    abstract: [
        "I discovered ___","I noticed ___","I learned ___","I heard ___","I observed ___"
    ],
    people: [
        "I met ___","I helped ___","I spoke to ___","I saw ___","I called ___"
    ],
    plants: [
        "I planted ___","I watered ___","I picked ___","I grew ___","I trimmed ___"
    ]
};

// ===== 生成 questionBank =====
const questionBank = [];

for (const [category, nouns] of Object.entries(nounsByCategory)) {
    const starters = startersByCategory[category];
    nouns.forEach(noun => {
        const vowelStart = /^[aeiou]/i.test(noun);
        const article = vowelStart ? "an" : "a";
        questionBank.push({ noun, vowelStart, article, starters });
    });
}

// ===== 使用示例 =====
// 生成句子时：
function generateSentence() {
    const q = questionBank[Math.floor(Math.random() * questionBank.length)];
    const starter = q.starters[Math.floor(Math.random() * q.starters.length)];
    return starter.replace("___", `${q.article} ${q.noun}`);
}

// console.log(generateSentence());
// ===== 现在 questionBank 可以直接使用 =====

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalScore = 0;
        let answered = false;
        let selectedVoice = 'female';
        let speechSynthesis = window.speechSynthesis;
        let voices = [];

        // Initialize speech synthesis
        function initSpeech() {
            voices = speechSynthesis.getVoices();
            
            // If voices aren't loaded yet, wait for them
            if (voices.length === 0) {
                speechSynthesis.addEventListener('voiceschanged', () => {
                    voices = speechSynthesis.getVoices();
                });
            }
        }

        // Get appropriate voice based on selection
        function getVoice() {
            if (voices.length === 0) {
                voices = speechSynthesis.getVoices();
            }
            
            let preferredVoice = null;
            
            if (selectedVoice === 'female') {
                // Look for female voices
                preferredVoice = voices.find(voice => 
                    voice.name.toLowerCase().includes('female') ||
                    voice.name.toLowerCase().includes('woman') ||
                    voice.name.toLowerCase().includes('samantha') ||
                    voice.name.toLowerCase().includes('karen') ||
                    voice.name.toLowerCase().includes('susan') ||
                    voice.name.toLowerCase().includes('victoria') ||
                    voice.name.toLowerCase().includes('zira') ||
                    voice.name.toLowerCase().includes('hazel')
                );
            } else {
                // Look for male voices
                preferredVoice = voices.find(voice => 
                    voice.name.toLowerCase().includes('male') ||
                    voice.name.toLowerCase().includes('man') ||
                    voice.name.toLowerCase().includes('david') ||
                    voice.name.toLowerCase().includes('mark') ||
                    voice.name.toLowerCase().includes('daniel') ||
                    voice.name.toLowerCase().includes('alex') ||
                    voice.name.toLowerCase().includes('tom')
                );
            }
            
            // Fallback to default voice if specific gender not found
            return preferredVoice || voices[0] || null;
        }

        // Speak text with selected voice
        function speak(text) {
            // Stop any ongoing speech
            speechSynthesis.cancel();
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                const voice = getVoice();
                
                if (voice) {
                    utterance.voice = voice;
                }
                
                // Set speech parameters for child-friendly speech
                utterance.rate = 0.8; // Slightly slower for kids
                utterance.pitch = selectedVoice === 'female' ? 1.2 : 0.9;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            }
        }

        // Set voice preference
        function setVoice(voiceType) {
            selectedVoice = voiceType;
            
            // Update button states
            document.getElementById('female-voice').classList.remove('active');
            document.getElementById('male-voice').classList.remove('active');
            document.getElementById(voiceType + '-voice').classList.add('active');
        }

        // Get appropriate sentence starters for a given noun
        function getAppropriateStarters(noun) {
            // Food items
            const foodItems = ['apple', 'orange', 'banana', 'cookie', 'cake', 'pizza', 'sandwich', 'grape', 'strawberry', 'watermelon', 'pineapple', 'cherry', 'peach', 'pear', 'lemon', 'lime', 'mango', 'kiwi', 'avocado', 'onion', 'potato', 'carrot', 'tomato', 'cucumber', 'lettuce', 'broccoli', 'corn', 'pepper', 'mushroom', 'spinach', 'ice cream'];
            
            // Pet animals (realistic to have)
            const petAnimals = ['cat', 'dog', 'bird', 'fish', 'rabbit', 'turtle', 'frog'];
            
            // Wild animals (see at zoo, in books, etc.)
            const wildAnimals = ['elephant', 'monkey', 'tiger', 'lion', 'zebra', 'giraffe', 'kangaroo', 'panda', 'koala', 'whale', 'shark', 'dolphin', 'snake', 'lizard', 'eagle', 'owl', 'octopus'];
            
            // Small creatures (realistic to see/find)
            const smallCreatures = ['spider', 'butterfly', 'bee', 'ladybug', 'ant'];
            
            // Clothing items
            const clothing = ['shirt', 'dress', 'hat', 'shoe', 'sock', 'jacket', 'sweater', 'scarf', 'glove', 'belt', 'uniform'];
            
            // Art supplies
            const artSupplies = ['crayon', 'marker', 'paint', 'brush', 'canvas', 'easel', 'palette'];
            
            // Vehicles
            const vehicles = ['car', 'bicycle', 'motorcycle', 'truck', 'bus', 'train', 'boat', 'ship', 'helicopter', 'rocket', 'airplane'];
            
            // Tools
            const tools = ['hammer', 'screwdriver', 'wrench', 'nail', 'screw', 'rope', 'ladder', 'bucket', 'shovel', 'rake', 'hose'];
            
            // Toys/Objects you can hold
            const toys = ['ball', 'book', 'pencil', 'eraser', 'key', 'phone', 'camera', 'watch', 'ring', 'necklace', 'bracelet'];
            
            // Things you can hear
            const soundItems = ['song', 'melody', 'rhythm', 'beat', 'drum', 'guitar', 'piano', 'violin', 'flute', 'trumpet', 'saxophone', 'harmonica', 'microphone', 'speaker', 'headphone', 'earphone'];
            
            // Time-related words that need special handling
            const timeWords = ['hour'];
            
            // Abstract concepts that need special handling
            const abstractWords = ['honest'];
            
            if (timeWords.includes(noun)) {
                return ['I waited ___', 'I spent ___', 'I need ___', 'It took ___', 'After ___'];
            } else if (abstractWords.includes(noun)) {
                return ['I met ___ person', 'I know ___ person', 'I like ___ person', 'I found ___ person', 'I am ___ person'];
            } else if (foodItems.includes(noun)) {
                return ['I ate ___', 'I want ___', 'I like ___', 'I bought ___', 'I found ___', 'I have ___'];
            } else if (petAnimals.includes(noun)) {
                return ['I have ___', 'I saw ___', 'I like ___', 'I pet ___', 'I fed ___', 'I found ___'];
            } else if (wildAnimals.includes(noun)) {
                return ['I saw ___', 'I drew ___', 'I like ___', 'I read about ___', 'I watched ___', 'There was ___'];
            } else if (smallCreatures.includes(noun)) {
                return ['I saw ___', 'I found ___', 'I watched ___', 'There was ___', 'I caught ___'];
            } else if (clothing.includes(noun)) {
                return ['I wore ___', 'I bought ___', 'I found ___', 'I have ___', 'I like ___', 'I need ___'];
            } else if (artSupplies.includes(noun)) {
                return ['I used ___', 'I found ___', 'I bought ___', 'I have ___', 'I need ___', 'I picked ___'];
            } else if (vehicles.includes(noun)) {
                return ['I saw ___', 'I rode ___', 'I built ___', 'I like ___', 'I want ___', 'There was ___'];
            } else if (tools.includes(noun)) {
                return ['I used ___', 'I found ___', 'I bought ___', 'I have ___', 'I need ___', 'I picked ___'];
            } else if (toys.includes(noun)) {
                return ['I found ___', 'I have ___', 'I lost ___', 'I picked ___', 'I bought ___', 'I like ___'];
            } else if (soundItems.includes(noun)) {
                return ['I heard ___', 'I like ___', 'I played ___', 'I have ___', 'I want ___', 'I bought ___'];
            } else {
                // Default starters for other items
                return ['I saw ___', 'I found ___', 'I have ___', 'I like ___', 'I bought ___', 'I need ___'];
            }
        }

        // Read the full sentence
        function readFullSentence() {
            if (!answered) return;
            
            const question = currentQuestions[currentQuestionIndex];
            const fullSentence = question.sentenceStarter.replace('___', `${question.article} ${question.noun}`);
            speak(fullSentence);
        }

        // Initialize the game
        function initGame() {
            // Reset all game variables to starting state
            currentQuestionIndex = 0;
            correctAnswers = 0;
            totalScore = 0;
            answered = false;
            
            // Separate questions by article type
            const aQuestions = questionBank.filter(q => q.article === 'a');
            const anQuestions = questionBank.filter(q => q.article === 'an');
            
            // Shuffle both arrays
            const shuffledA = [...aQuestions].sort(() => 0.5 - Math.random());
            const shuffledAn = [...anQuestions].sort(() => 0.5 - Math.random());
            
            currentQuestions = [];
            const usedNouns = new Set();
            
            // Ensure at least 1 "an" question and at least 1 "a" question
            // First, add at least one "an" question
            for (let question of shuffledAn) {
                if (!usedNouns.has(question.noun) && currentQuestions.length < 5) {
                    currentQuestions.push(question);
                    usedNouns.add(question.noun);
                    break; // Only need one to start
                }
            }
            
            // Then add at least one "a" question
            for (let question of shuffledA) {
                if (!usedNouns.has(question.noun) && currentQuestions.length < 5) {
                    currentQuestions.push(question);
                    usedNouns.add(question.noun);
                    break; // Only need one to start
                }
            }
            
            // Fill the remaining slots with any available questions
            const allShuffled = [...shuffledA, ...shuffledAn].sort(() => 0.5 - Math.random());
            for (let question of allShuffled) {
                if (!usedNouns.has(question.noun) && currentQuestions.length < 5) {
                    currentQuestions.push(question);
                    usedNouns.add(question.noun);
                }
            }
            
            // Shuffle the final selection so "an" and "a" questions are mixed
            currentQuestions.sort(() => 0.5 - Math.random());
            
            // Reset the next button to normal state
            const nextBtn = document.getElementById('next-btn');
            nextBtn.textContent = 'Next Question 🎉';
            nextBtn.onclick = nextQuestion;
            
            displayQuestion();
            updateScoreboard();
            updateProgress();
        }

        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            // Pick an appropriate sentence starter based on the noun
            const appropriateStarters = getAppropriateStarters(question.noun);
            const randomStarter = appropriateStarters[Math.floor(Math.random() * appropriateStarters.length)];
            question.sentenceStarter = randomStarter; // Store it for later use
            
            document.getElementById('question-number').textContent = `Question ${currentQuestionIndex + 1} of 5`;
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            
            // Update the question text with the random starter and proper underline placement
            document.getElementById('question-text').innerHTML = `${randomStarter.replace('___', '___ <span class="noun-highlight">' + question.noun + '</span>')}`;
            
            // Reset UI
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('celebration').classList.remove('show');
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('read-sentence-btn').style.display = 'none';
            
            // Enable option buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '1';
            });
            
            answered = false;
        }

        function selectAnswer(selectedArticle) {
            if (answered) return;
            
            answered = true;
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = selectedArticle === question.article;
            
            // Disable buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent !== selectedArticle) {
                    btn.style.opacity = '0.5';
                }
            });
            
            // Show feedback
            const feedback = document.getElementById('feedback');
            const celebration = document.getElementById('celebration');
            
            if (isCorrect) {
                correctAnswers++;
                totalScore += 20;
                const correctSentence = question.sentenceStarter.replace('___', `${question.article} ${question.noun}`);
                feedback.textContent = `🎉 Correct! "${correctSentence}"`;
                feedback.classList.add('show', 'correct');
                celebration.textContent = '🌟 Great job! 🌟';
                celebration.classList.add('show');
            } else {
                const correctSentence = question.sentenceStarter.replace('___', `${question.article} ${question.noun}`);
                feedback.textContent = `❌ Oops! It should be "${correctSentence}"`;
                feedback.classList.add('show', 'incorrect');
                celebration.textContent = '💪 Try again next time! 💪';
                celebration.classList.add('show');
            }
            
            updateScoreboard();
            
            // Show both buttons immediately after answering
            document.getElementById('read-sentence-btn').style.display = 'inline-block';
            
            setTimeout(() => {
                if (currentQuestionIndex < 4) {
                    document.getElementById('next-btn').style.display = 'inline-block';
                } else {
                    showFinalResults();
                }
            }, 1500);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            updateProgress();
            displayQuestion();
        }

        function updateScoreboard() {
            document.getElementById('correct-score').textContent = correctAnswers;
            document.getElementById('total-score').textContent = totalScore;
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / 5) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        function showFinalResults() {
            const feedback = document.getElementById('feedback');
            const celebration = document.getElementById('celebration');
            const nextBtn = document.getElementById('next-btn');
            
            let message = '';
            let celebrationEmoji = '';
            
            if (correctAnswers === 5) {
                message = '🏆 Perfect! You got all 5 correct! You\'re an articles expert! 🏆';
                celebrationEmoji = '🎊 AMAZING! 🎊';
            } else if (correctAnswers >= 3) {
                message = `🌟 Great job! You got ${correctAnswers} out of 5 correct! Keep practicing! 🌟`;
                celebrationEmoji = '👏 Well done! 👏';
            } else {
                message = `💪 You got ${correctAnswers} out of 5 correct. Practice makes perfect! 💪`;
                celebrationEmoji = '🌈 Keep trying! 🌈';
            }
            
            feedback.textContent = message;
            feedback.classList.remove('correct', 'incorrect');
            feedback.classList.add('show', 'correct');
            
            celebration.textContent = celebrationEmoji;
            celebration.classList.add('show');
            
            nextBtn.textContent = 'Play Again! 🎮';
            nextBtn.style.display = 'inline-block';
            nextBtn.onclick = initGame;
        }

        // Initialize speech and start the game
        initSpeech();
        initGame();
        
        // Handle user interaction requirement for mobile devices
        document.addEventListener('click', function() {
            // This ensures speech synthesis is enabled after user interaction
            if (speechSynthesis.paused) {
                speechSynthesis.resume();
            }
        }, { once: true });

(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'979941e7b05fce61',t:'MTc1Njk0NDU1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();
  </script>
</body>
</html>
